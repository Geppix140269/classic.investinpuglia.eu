<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="InvestiScope™ Classic - Advanced calculator for Mini PIA Turismo grants with detailed financial projections and ROI analysis">
    <title>InvestiScope™ Classic - Professional Investment Analysis</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- External Scripts -->
    <!-- Firebase Auth Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="classic-app-container">
        <div class="gradient-bg"></div>
        <div class="gradient-overlay"></div>
        
        <div class="main-container">
            <!-- Success Toast -->
            <div class="success-toast" id="successToast">
                ✅ PDF Report Generated! Check your downloads.
            </div>
            
            <!-- Premium Header -->
            <header class="premium-header">
                <div class="logo-badge">AI-POWERED INVESTMENT ANALYSIS</div>
                <h1 class="main-title">InvestiScope<strong>™</strong> Classic</h1>
                <p class="subtitle">Advanced calculator for Mini PIA Turismo grants with detailed financial projections and ROI analysis</p>
            </header>
            
            <!-- Project Costs Section -->
            <section class="glass-card">
                <div class="section-header">
                    <span class="section-icon">🏠</span>
                    <h2 class="section-title">Mini PIA Turismo - Eligible Costs</h2>
                </div>
                
                <!-- Property Purchase -->
                <div class="slider-item">
                    <div class="slider-header">
                        <span class="slider-label">🏠  Property Purchase</span>
                        <span class="slider-value-display" id="propertyPurchaseValue">€800,000</span>
                    </div>
                    <div class="slider-wrapper">
                        <input type="range" class="modern-slider" id="propertyPurchaseInput" 
                               min="100000" max="3000000" value="800000" step="10000">
                    </div>
                    <p class="slider-hint">Building acquisition (100% eligible)</p>
                </div>
                
                <!-- Restructuring & Renovations -->
                <div class="slider-item">
                    <div class="slider-header">
                        <span class="slider-label">🔨 Restructuring & Renovations</span>
                        <span class="slider-value-display" id="restructuringValue">€400,000</span>
                    </div>
                    <div class="slider-wrapper">
                        <input type="range" class="modern-slider" id="restructuringInput" 
                               min="50000" max="2000000" value="400000" step="10000">
                    </div>
                    <p class="slider-hint">Construction and building improvements (100% eligible)</p>
                </div>
                
                <!-- Fixtures & Fittings -->
                <div class="slider-item">
                    <div class="slider-header">
                        <span class="slider-label">📦 Fixtures & Fittings</span>
                        <span class="slider-value-display" id="fixturesValue">€150,000</span>
                    </div>
                    <div class="slider-wrapper">
                        <input type="range" class="modern-slider" id="fixturesInput" 
                               min="10000" max="1000000" value="150000" step="5000">
                    </div>
                    <p class="slider-hint">Equipment, furniture, and fittings for the property</p>
                    <p class="percentage-suggestion" id="fixturesSuggestion">Suggested: 12.5% of civil works (€150,000)</p>
                </div>
                
                <!-- Innovation Component -->
                <div class="slider-item">
                    <div class="slider-header">
                        <span class="slider-label">💡 Innovation Component</span>
                        <span class="slider-value-display" id="innovationValue">€40,000</span>
                    </div>
                    <div class="slider-wrapper">
                        <input type="range" class="modern-slider" id="innovationInput" 
                               min="0" max="500000" value="40000" step="1000">
                    </div>
                    <p class="slider-hint">Technology and digital systems</p>
                    <div class="component-explanation">
                        Includes: Smart home systems, booking platforms, digital guest services, IoT devices, automated check-in systems
                    </div>
                    <p class="percentage-suggestion" id="innovationSuggestion">Suggested: 3-4% of civil works (€42,000)</p>
                </div>
                
                <!-- Environmental Protection -->
                <div class="slider-item">
                    <div class="slider-header">
                        <span class="slider-label">🌿 Environmental Protection</span>
                        <span class="slider-value-display" id="environmentalValue">€35,000</span>
                    </div>
                    <div class="slider-wrapper">
                        <input type="range" class="modern-slider" id="environmentalInput" 
                               min="0" max="500000" value="35000" step="1000">
                    </div>
                    <p class="slider-hint">Energy efficiency and sustainability measures</p>
                    <div class="component-explanation">
                        Includes: Solar panels, heat pumps, insulation upgrades, LED lighting, water recycling systems, green roofs
                    </div>
                    <p class="percentage-suggestion" id="environmentalSuggestion">Suggested: 2-3% of civil works (€30,000)</p>
                </div>
                
                <!-- Integrated Components Info -->
                <div class="info-box">
                    <strong>💡 Integrated Project Components Check</strong><br>
                    Innovation + Environmental = <span id="integratedTotal">€75,000</span> 
                    (<span id="integratedPercent">5.1%</span> of eligible costs)<br>
                    <span id="integratedStatus" style="color: #059669">✓ Meets minimum 5% requirement</span>
                </div>
                
                <!-- Design & Project Management -->
                <div class="slider-item">
                    <div class="slider-header">
                        <span class="slider-label">🏠“ Design & Project Management</span>
                        <span class="slider-value-display" id="designPmValue">€24,000</span>
                    </div>
                    <p class="slider-hint">Calculated as 6% of renovation costs only</p>
                    <div class="calculation-note" id="designPmNote">
                        6% × €400,000 (renovations) = €24,000
                    </div>
                </div>
                
                <!-- Preliminary Studies -->
                <div class="slider-item">
                    <div class="slider-header">
                        <span class="slider-label">🏠“Š Preliminary Studies & Technical Costs</span>
                        <span class="slider-value-display" id="preliminaryStudiesValue">€20,655</span>
                    </div>
                    <p class="slider-hint">Calculated as 1.5% of total eligible costs</p>
                    <div class="calculation-note">
                        1.5% of final eligible total (includes all components above)
                    </div>
                </div>
                
                <!-- Grant Rate Selection -->
                <div class="slider-item">
                    <div class="slider-header">
                        <span class="slider-label">💰 Mini PIA Non-Refundable Grant Rate</span>
                        <span class="slider-value-display" id="grantRateValue">50%</span>
                    </div>
                    <div class="slider-wrapper">
                        <input type="range" class="modern-slider" id="grantRateInput" 
                               min="45" max="55" value="50" step="1">
                    </div>
                    <p class="slider-hint">Non-refundable grant: 45-55% of eligible costs</p>
                </div>
                
                <!-- Total Eligible -->
                <div class="total-card">
                    <div class="total-label">✅ TOTAL ELIGIBLE FOR MINI PIA</div>
                    <div class="total-value" id="totalEligibleDisplay">€1,399,655</div>
                </div>
                
                <!-- Grant Amount -->
                <div class="grant-info-box">
                    <div class="grant-info-text">
                        Non-refundable grant calculated at selected rate of eligible costs<br>
                        (45-55% range available based on project criteria)
                    </div>
                </div>
                
                <div class="total-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.2) 100%); border-color: rgba(16, 185, 129, 0.5)">
                    <div class="total-label">💰 NON-REFUNDABLE GRANT</div>
                    <div class="total-value" id="miniPiaGrantDisplay" style="color: #10b981">€629,845</div>
                </div>
                
                <!-- Tax Credit -->
                <div class="total-card" style="background: linear-gradient(135deg, rgba(96, 165, 250, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%); border-color: rgba(96, 165, 250, 0.5)">
                    <div class="total-label">🏠’° TAX CREDIT (15%)</div>
                    <div class="total-value" id="taxCreditDisplay" style="color: #60a5fa">€209,948</div>
                </div>
                
                <!-- Total Benefit -->
                <div class="total-card" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(147, 51, 234, 0.2) 100%); border-color: rgba(168, 85, 247, 0.5)">
                    <div class="total-label">🏠† TOTAL MINI PIA BENEFIT</div>
                    <div class="total-value" id="totalBenefitDisplay" style="color: #a855f7">€839,793</div>
                </div>

                <!-- Non-Eligible Costs Section -->
                <div class="non-eligible-section">
                    <div class="non-eligible-header">
                        âš ï¸ Non-Eligible Costs (Not covered by Mini PIA)
                    </div>
                    
                    <!-- Agency Fees -->
                    <div class="slider-item">
                        <div class="slider-header">
                            <span class="slider-label">🏠¢ Agency Fees</span>
                            <span class="slider-value-display" id="agencyFeesValue">€24,000</span>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" class="modern-slider" id="agencyFeesInput" 
                                   min="2" max="5" value="3" step="0.1">
                        </div>
                        <p class="slider-hint">Rate: <span id="agencyRateDisplay">3.0%</span> of property value</p>
                    </div>
                    
                    <!-- Registration Tax -->
                    <div class="slider-item">
                        <div class="slider-header">
                            <span class="slider-label">🏠“ Registration Tax</span>
                            <span class="slider-value-display" id="registrationTaxValue">€72,000</span>
                        </div>
                        <p class="slider-hint">Auto-calculated: 9% of property purchase price</p>
                    </div>
                    
                    <!-- Notary Fees -->
                    <div class="slider-item">
                        <div class="slider-header">
                            <span class="slider-label">⚖️ Notary & Legal Fees</span>
                            <span class="slider-value-display" id="notaryFeesValue">€12,000</span>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" class="modern-slider" id="notaryFeesInput" 
                                   min="5000" max="30000" value="12000" step="1000">
                        </div>
                        <p class="slider-hint">Notary services for property transfer</p>
                    </div>
                    
                    <!-- Consulting Fees -->
                    <div class="slider-item">
                        <div class="slider-header">
                            <span class="slider-label">🏠’¼ Business Consulting (M&T)</span>
                            <span class="slider-value-display" id="consultingFeesValue">€25,000</span>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" class="modern-slider" id="consultingFeesInput" 
                                   min="10000" max="50000" value="25000" step="2500">
                        </div>
                        <p class="slider-hint">Grant application support and business planning</p>
                    </div>
                    
                    <!-- Total Non-Eligible -->
                    <div class="total-card" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%); border-color: rgba(239, 68, 68, 0.3)">
                        <div class="total-label">âŒ TOTAL NON-ELIGIBLE COSTS</div>
                        <div class="total-value" id="totalNonEligibleDisplay" style="color: #ef4444">€133,000</div>
                    </div>
                </div>

                <!-- Grand Total -->
                <div class="total-card" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(79, 70, 229, 0.2) 100%); border-color: rgba(99, 102, 241, 0.5); margin-top: 30px">
                    <div class="total-label">🏠“Š TOTAL PROJECT INVESTMENT</div>
                    <div class="total-value" id="totalProjectDisplay" style="color: #6366f1">€1,532,655</div>
                </div>
                
                <!-- Your Net Investment -->
                <div class="total-card" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(22, 163, 74, 0.2) 100%); border-color: rgba(34, 197, 94, 0.5)">
                    <div class="total-label">🏠’µ YOUR NET INVESTMENT (After Mini PIA)</div>
                    <div class="total-value" id="netInvestmentDisplay" style="color: #22c55e">€692,862</div>
                </div>
            </section>

            <!-- Professional Costs Enhancement Section -->
            <section class="glass-card enhancement-section">
                <h3>🏠’¼ Professional & Hidden Costs</h3>
                <div class="cost-grid">
                    <div class="cost-item">
                        <label><input type="checkbox" id="cost-notaryFees" checked> Notary Fees (2%)</label>
                        <span class="cost-value" id="value-notaryFees">€16,000</span>
                    </div>
                    <div class="cost-item">
                        <label><input type="checkbox" id="cost-legalFees" checked> Legal Assistance</label>
                        <span class="cost-value" id="value-legalFees">€12,000</span>
                    </div>
                    <div class="cost-item">
                        <label><input type="checkbox" id="cost-architectFees" checked> Architect & Design (8%)</label>
                        <span class="cost-value" id="value-architectFees">€32,000</span>
                    </div>
                    <div class="cost-item">
                        <label><input type="checkbox" id="cost-permitCosts" checked> Permits & Approvals</label>
                        <span class="cost-value" id="value-permitCosts">€5,000</span>
                    </div>
                    <div class="cost-item">
                        <label><input type="checkbox" id="cost-projectManagement" checked> Project Management (5%)</label>
                        <span class="cost-value" id="value-projectManagement">€20,000</span>
                    </div>
                </div>
                <div class="cost-total">
                    <strong>Total Professional Costs:</strong>
                    <span id="total-professional-costs">€85,000</span>
                </div>
            </section>

            <!-- Report CTA Section -->
            <section class="report-cta-section">
                <h3 class="report-cta-title">🏠“Š Want a Professional PDF Report?</h3>
                <p class="report-cta-subtitle">Get your complete investment analysis delivered instantly!</p>
                <button class="cta-button" onclick="showRegistrationModal()">
                    Get My Free Report
                </button>
            </section>

            <footer class="footer">
                <p>InvestiScope™ Classic - Professional Investment Analysis Tool</p>
                <p>© 2024 M&T International. All rights reserved.</p>
            </footer>
        </div>
        
        <!-- Registration Modal -->
        <div class="modal-overlay" id="registrationOverlay">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal()">✕</button>
                
                <div class="modal-header">
                    <h2 class="modal-title">Get Your Complete Investment Report</h2>
                    <p class="modal-subtitle">Free • Instant • Professional Analysis</p>
                </div>
                
                <div class="preview-stats">
                    <h3 style="color: white; margin-bottom: 20px; text-align: center">Your Personalized Report Includes:</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-label">Mini PIA Grant</div>
                            <div class="stat-value" id="previewGrant">€629,845</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Total Benefit</div>
                            <div class="stat-value" id="previewBenefit">€839,793</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Net Investment</div>
                            <div class="stat-value" id="previewNet">€692,862</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Project Total</div>
                            <div class="stat-value" id="previewTotal">€1,532,655</div>
                        </div>
                    </div>
                </div>
                
                <form id="reportForm" onsubmit="handleRegistration(event); return false;">
                    <div class="form-group">
                        <label class="form-label">Full Name *</label>
                        <input type="text" class="form-input" id="userName" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email Address *</label>
                        <input type="email" class="form-input" id="userEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-input" id="userPhone" placeholder="+39 XXX XXX XXXX">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Property Location in Italy</label>
                        <input type="text" class="form-input" id="propertyLocation" placeholder="e.g., Puglia, Tuscany, Sicily">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Investment Timeline</label>
                        <select class="form-select" id="investmentTimeline">
                            <option value="">Select timeline</option>
                            <option value="immediate">Immediate (0-3 months)</option>
                            <option value="short">Short term (3-6 months)</option>
                            <option value="medium">Medium term (6-12 months)</option>
                            <option value="long">Long term (12+ months)</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="submit-button">
                        🏠“Š Get My Free Report Now
                    </button>
                </form>
                
                <button 
                    type="button"
                    class="whatsapp-button"
                    onclick="sendWhatsAppDirect()"
                    aria-label="Send Report via WhatsApp"
                >
                    🏠’¬ Send Report via WhatsApp
                </button>
                
                <p class="privacy-note">
                    🏠”’ Your information is secure and will only be used to send your report.<br>
                    We respect your privacy and won't spam you.
                </p>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>


